document.addEventListener("DOMContentLoaded",function(){let i={toolsUsed:0,itemsGenerated:0,copiesMade:0};const I=localStorage.getItem("devToolsStats");I&&(i=JSON.parse(I),f());function d(n){i[n]++,localStorage.setItem("devToolsStats",JSON.stringify(i)),f()}function f(){const n=document.getElementById("tools-used"),e=document.getElementById("items-generated"),t=document.getElementById("copies-made");n&&(n.textContent=i.toolsUsed.toString()),e&&(e.textContent=i.itemsGenerated.toString()),t&&(t.textContent=i.copiesMade.toString())}window.generateQR=function(){const n=document.getElementById("qr-input");if(!n)return;const e=n.value.trim();if(!e){alert("Please enter some text or URL");return}const t=document.getElementById("qr-code");if(t){t.innerHTML="";try{new QRCode(t,{text:e,width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),setTimeout(()=>{const o=document.getElementById("qr-result");o&&o.classList.remove("hidden");const a=t.querySelector("img")||t.querySelector("canvas");a&&a.classList.add("border","rounded","mx-auto"),d("itemsGenerated"),d("toolsUsed")},100)}catch(o){console.error(o),t.innerHTML="Error generating QR code. Please try again."}}},window.downloadQR=function(){const n=document.querySelector("#qr-code canvas"),e=document.querySelector("#qr-code img");if(n){const t=document.createElement("a");t.download="qrcode.png",t.href=n.toDataURL(),t.click()}else if(e){const t=document.createElement("a");t.download="qrcode.png",t.href=e.src,t.click()}else alert("No QR code to download. Please generate one first.")},window.generatePalette=function(){const n=document.getElementById("base-color");if(!n)return;const e=n.value,t=w(e),o=document.getElementById("color-palette"),a=document.getElementById("color-codes");!o||!a||(o.innerHTML="",a.innerHTML="",t.forEach(s=>{const c=document.createElement("div");c.className="h-12 rounded cursor-pointer hover:scale-105 transition-transform",c.style.backgroundColor=s,c.title=s,c.onclick=()=>window.copyToClipboard(null,s),o.appendChild(c);const r=document.createElement("div");r.className="text-gray-600 dark:text-gray-400 cursor-pointer hover:text-blue-600",r.textContent=s.toUpperCase(),r.onclick=()=>window.copyToClipboard(null,s),a.appendChild(r)}),d("itemsGenerated"),d("toolsUsed"))};function w(n){const e=C(n),t=[];for(let o=0;o<5;o++){const a=Math.max(10,Math.min(90,e.l+(o-2)*20)),s=Math.max(10,Math.min(100,e.s+(o-2)*10));t.push(S(e.h,s,a))}return t}function C(n){const e=parseInt(n.slice(1,3),16)/255,t=parseInt(n.slice(3,5),16)/255,o=parseInt(n.slice(5,7),16)/255,a=Math.max(e,t,o),s=Math.min(e,t,o);let c=0,r=0;const g=(a+s)/2;if(a===s)c=r=0;else{const l=a-s;switch(r=g>.5?l/(2-a-s):l/(a+s),a){case e:c=(t-o)/l+(t<o?6:0);break;case t:c=(o-e)/l+2;break;case o:c=(e-t)/l+4;break}c/=6}return{h:Math.round(c*360),s:Math.round(r*100),l:Math.round(g*100)}}function S(n,e,t){t/=100;const o=e*Math.min(t,1-t)/100,a=s=>{const c=(s+n/30)%12,r=t-o*Math.max(Math.min(c-3,9-c,1),-1);return Math.round(255*r).toString(16).padStart(2,"0")};return`#${a(0)}${a(8)}${a(4)}`}const u=["lorem","ipsum","dolor","sit","amet","consectetur","adipiscing","elit","sed","do","eiusmod","tempor","incididunt","ut","labore","et","dolore","magna","aliqua","enim","ad","minim","veniam","quis","nostrud","exercitation","ullamco","laboris","nisi","aliquip","ex","ea","commodo","consequat","duis","aute","irure","in","reprehenderit","voluptate","velit","esse","cillum","fugiat","nulla","pariatur","excepteur","sint","occaecat","cupidatat","non","proident","sunt","culpa","qui","officia","deserunt","mollit","anim","id","est","laborum"];window.generateLorem=function(){const n=document.getElementById("lorem-type"),e=document.getElementById("lorem-count"),t=document.getElementById("lorem-output");if(!n||!e||!t)return;const o=n.value,a=parseInt(e.value);let s="";if(o==="words"){const c=[];for(let r=0;r<a;r++)c.push(u[Math.floor(Math.random()*u.length)]);s=c.join(" ")}else if(o==="sentences"){const c=[];for(let r=0;r<a;r++){const g=Math.floor(Math.random()*10)+5,l=[];for(let p=0;p<g;p++)l.push(u[Math.floor(Math.random()*u.length)]);c.push(l.join(" ").charAt(0).toUpperCase()+l.join(" ").slice(1)+".")}s=c.join(" ")}else if(o==="paragraphs"){const c=[];for(let r=0;r<a;r++){const g=Math.floor(Math.random()*5)+3,l=[];for(let p=0;p<g;p++){const M=Math.floor(Math.random()*10)+5,v=[];for(let x=0;x<M;x++)v.push(u[Math.floor(Math.random()*u.length)]);l.push(v.join(" ").charAt(0).toUpperCase()+v.join(" ").slice(1)+".")}c.push(l.join(" "))}s=c.join(`

`)}t.value=s,d("itemsGenerated"),d("toolsUsed")},window.generatePassword=function(){const n=parseInt(document.getElementById("password-length").value),e=document.getElementById("include-uppercase").checked,t=document.getElementById("include-lowercase").checked,o=document.getElementById("include-numbers").checked,a=document.getElementById("include-symbols").checked;let s="";if(e&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),t&&(s+="abcdefghijklmnopqrstuvwxyz"),o&&(s+="0123456789"),a&&(s+="!@#$%^&*()_+-=[]{}|;:,.<>?"),!s){alert("Please select at least one character type");return}let c="";for(let r=0;r<n;r++)c+=s.charAt(Math.floor(Math.random()*s.length));document.getElementById("password-output").value=c,d("itemsGenerated"),d("toolsUsed")};let h="encode";window.setBase64Mode=function(n){h=n;const e=document.getElementById("encode-btn"),t=document.getElementById("decode-btn"),o=document.getElementById("base64-label"),a=document.getElementById("base64-process-btn");n==="encode"?(e.className="flex-1 bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors",t.className="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition-colors",o.textContent="Text to Encode",a.textContent="Encode Text"):(e.className="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition-colors",t.className="flex-1 bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors",o.textContent="Base64 to Decode",a.textContent="Decode Text")},window.processBase64=function(){const n=document.getElementById("base64-input").value,e=document.getElementById("base64-output");try{h==="encode"?e.value=btoa(n):e.value=atob(n),d("itemsGenerated"),d("toolsUsed")}catch{alert("Error: Invalid input for "+h)}},window.formatJSON=function(){const n=document.getElementById("json-input").value,e=document.getElementById("json-output");try{const t=JSON.parse(n);e.value=JSON.stringify(t,null,2),m("✅ Valid JSON formatted successfully","text-green-600"),d("itemsGenerated"),d("toolsUsed")}catch(t){m("❌ Invalid JSON: "+t.message,"text-red-600")}},window.minifyJSON=function(){const n=document.getElementById("json-input").value,e=document.getElementById("json-output");try{const t=JSON.parse(n);e.value=JSON.stringify(t),m("✅ JSON minified successfully","text-green-600"),d("itemsGenerated"),d("toolsUsed")}catch(t){m("❌ Invalid JSON: "+t.message,"text-red-600")}},window.validateJSON=function(){const n=document.getElementById("json-input").value;try{JSON.parse(n),m("✅ Valid JSON!","text-green-600"),d("toolsUsed")}catch(e){m("❌ Invalid JSON: "+e.message,"text-red-600")}};function m(n,e){const t=document.getElementById("json-status");t.textContent=n,t.className=`text-sm ${e}`,t.classList.remove("hidden")}window.copyToClipboard=async function(n,e){let t=e;if(!t&&n){const o=document.getElementById(n);o&&(t=o.value)}if(t)try{await navigator.clipboard.writeText(t),d("copiesMade")}catch{const a=document.createElement("textarea");a.value=t,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),d("copiesMade")}},window.testRegex=function(){const n=document.getElementById("regex-pattern").value,e=document.getElementById("regex-flags").value,t=document.getElementById("regex-test").value,o=document.getElementById("regex-result");try{const a=new RegExp(n,e),s=t.match(a);s&&s.length>0?o.innerHTML=`<span class="text-green-600">✓ ${s.length} match(es) found:</span><br><br>`+s.map((c,r)=>`<span class="bg-yellow-200 dark:bg-yellow-800 px-1">${c}</span>`).join(", "):o.innerHTML='<span class="text-red-600">✗ No matches found</span>',d("toolsUsed")}catch(a){o.innerHTML=`<span class="text-red-600">Error: ${a.message}</span>`}},window.showDiff=function(){const n=document.getElementById("diff-original").value.split(`
`),e=document.getElementById("diff-modified").value.split(`
`),t=document.getElementById("diff-result");let o="";const a=Math.max(n.length,e.length);for(let s=0;s<a;s++){const c=n[s]||"",r=e[s]||"";c===r?o+=`<div class="text-gray-400">&nbsp; ${E(c)}</div>`:(c&&(o+=`<div class="text-red-400">- ${E(c)}</div>`),r&&(o+=`<div class="text-green-400">+ ${E(r)}</div>`))}t.innerHTML=o||'<span class="text-gray-400">No differences</span>',d("toolsUsed")};function E(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}window.timestampToDate=function(){const n=parseInt(document.getElementById("unix-timestamp").value);if(isNaN(n)){alert("Please enter a valid timestamp");return}const e=new Date(n*1e3);document.getElementById("human-date").value=e.toISOString().slice(0,16),document.getElementById("local-time").textContent=e.toLocaleString(),document.getElementById("utc-time").textContent=e.toUTCString(),document.getElementById("iso-time").textContent=e.toISOString(),d("toolsUsed")},window.dateToTimestamp=function(){const n=document.getElementById("human-date").value;if(!n){alert("Please select a date");return}const e=new Date(n),t=Math.floor(e.getTime()/1e3);document.getElementById("unix-timestamp").value=t,document.getElementById("local-time").textContent=e.toLocaleString(),document.getElementById("utc-time").textContent=e.toUTCString(),document.getElementById("iso-time").textContent=e.toISOString(),d("toolsUsed")},window.setCurrentTimestamp=function(){const n=new Date;document.getElementById("unix-timestamp").value=Math.floor(n.getTime()/1e3),document.getElementById("human-date").value=n.toISOString().slice(0,16),document.getElementById("local-time").textContent=n.toLocaleString(),document.getElementById("utc-time").textContent=n.toUTCString(),document.getElementById("iso-time").textContent=n.toISOString(),d("toolsUsed")};function y(){const n=document.getElementById("gradient-color1").value,e=document.getElementById("gradient-color2").value,t=document.getElementById("gradient-angle").value,o=document.getElementById("gradient-type").value;document.getElementById("gradient-angle-value").textContent=t+"°";let a;o==="linear"?a=`linear-gradient(${t}deg, ${n}, ${e})`:a=`radial-gradient(circle, ${n}, ${e})`,document.getElementById("gradient-preview").style.background=a,document.getElementById("gradient-output").value=`background: ${a};`}document.getElementById("gradient-color1")?.addEventListener("input",y),document.getElementById("gradient-color2")?.addEventListener("input",y),document.getElementById("gradient-angle")?.addEventListener("input",y),document.getElementById("gradient-type")?.addEventListener("change",y);function B(){const n=document.getElementById("cron-minute").value,e=document.getElementById("cron-hour").value,t=document.getElementById("cron-day").value,o=document.getElementById("cron-month").value,a=document.getElementById("cron-weekday").value,s=`${n} ${e} ${t} ${o} ${a}`;document.getElementById("cron-output").textContent=s,document.getElementById("cron-description").textContent=b(n,e,t,o,a)}function b(n,e,t,o,a){return n==="*"&&e==="*"&&t==="*"&&o==="*"&&a==="*"?"Runs every minute":n==="0"&&e==="*"&&t==="*"&&o==="*"&&a==="*"?"Runs every hour at minute 0":n==="0"&&e==="0"&&t==="*"&&o==="*"&&a==="*"?"Runs daily at midnight":n==="0"&&e==="0"&&t==="*"&&o==="*"&&a==="0"?"Runs every Sunday at midnight":n==="0"&&e==="0"&&t==="1"&&o==="*"&&a==="*"?"Runs on the 1st of every month at midnight":`Runs at minute ${n}, hour ${e}, day ${t}, month ${o}, weekday ${a}`}window.setCronPreset=function(n){const e=n.split(" ");document.getElementById("cron-minute").value=e[0],document.getElementById("cron-hour").value=e[1],document.getElementById("cron-day").value=e[2],document.getElementById("cron-month").value=e[3],document.getElementById("cron-weekday").value=e[4],B(),d("toolsUsed")},["cron-minute","cron-hour","cron-day","cron-month","cron-weekday"].forEach(n=>{document.getElementById(n)?.addEventListener("input",B)}),f(),setTimeout(()=>{typeof window.generatePalette=="function"&&window.generatePalette()},100)});
