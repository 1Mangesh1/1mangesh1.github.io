document.addEventListener("DOMContentLoaded",function(){let i={toolsUsed:0,itemsGenerated:0,copiesMade:0};const w=localStorage.getItem("devToolsStats");w&&(i=JSON.parse(w),f());function d(t){i[t]++,localStorage.setItem("devToolsStats",JSON.stringify(i)),f()}function f(){const t=document.getElementById("tools-used"),n=document.getElementById("items-generated"),e=document.getElementById("copies-made");t&&(t.textContent=i.toolsUsed.toString()),n&&(n.textContent=i.itemsGenerated.toString()),e&&(e.textContent=i.copiesMade.toString())}window.generateQR=function(){const t=document.getElementById("qr-input");if(!t)return;const n=t.value.trim();if(!n){alert("Please enter some text or URL");return}const e=document.getElementById("qr-code");if(!e)return;e.innerHTML="Generating QR code...";const s=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(n)}`,o=document.createElement("img");o.src=s,o.alt="QR Code",o.className="border rounded",o.onload=function(){if(!e)return;e.innerHTML="",e.appendChild(o);const a=document.getElementById("qr-result");a&&a.classList.remove("hidden"),d("itemsGenerated"),d("toolsUsed")},o.onerror=function(){e&&(e.innerHTML="Error loading QR code. Please try again.")}},window.downloadQR=function(){const t=document.querySelector("#qr-code canvas"),n=document.querySelector("#qr-code img");if(t){const e=document.createElement("a");e.download="qrcode.png",e.href=t.toDataURL(),e.click()}else if(n){const e=document.createElement("a");e.download="qrcode.png",e.href=n.src,e.click()}else alert("No QR code to download. Please generate one first.")},window.generatePalette=function(){const t=document.getElementById("base-color");if(!t)return;const n=t.value,e=v(n),s=document.getElementById("color-palette"),o=document.getElementById("color-codes");!s||!o||(s.innerHTML="",o.innerHTML="",e.forEach(a=>{const r=document.createElement("div");r.className="h-12 rounded cursor-pointer hover:scale-105 transition-transform",r.style.backgroundColor=a,r.title=a,r.onclick=()=>window.copyToClipboard(null,a),s.appendChild(r);const c=document.createElement("div");c.className="text-gray-600 dark:text-gray-400 cursor-pointer hover:text-blue-600",c.textContent=a.toUpperCase(),c.onclick=()=>window.copyToClipboard(null,a),o.appendChild(c)}),d("itemsGenerated"),d("toolsUsed"))};function v(t){const n=x(t),e=[];for(let s=0;s<5;s++){const o=Math.max(10,Math.min(90,n.l+(s-2)*20)),a=Math.max(10,Math.min(100,n.s+(s-2)*10));e.push(b(n.h,a,o))}return e}function x(t){const n=parseInt(t.slice(1,3),16)/255,e=parseInt(t.slice(3,5),16)/255,s=parseInt(t.slice(5,7),16)/255,o=Math.max(n,e,s),a=Math.min(n,e,s);let r=0,c=0;const p=(o+a)/2;if(o===a)r=c=0;else{const l=o-a;switch(c=p>.5?l/(2-o-a):l/(o+a),o){case n:r=(e-s)/l+(e<s?6:0);break;case e:r=(s-n)/l+2;break;case s:r=(n-e)/l+4;break}r/=6}return{h:Math.round(r*360),s:Math.round(c*100),l:Math.round(p*100)}}function b(t,n,e){e/=100;const s=n*Math.min(e,1-e)/100,o=a=>{const r=(a+t/30)%12,c=e-s*Math.max(Math.min(r-3,9-r,1),-1);return Math.round(255*c).toString(16).padStart(2,"0")};return`#${o(0)}${o(8)}${o(4)}`}const u=["lorem","ipsum","dolor","sit","amet","consectetur","adipiscing","elit","sed","do","eiusmod","tempor","incididunt","ut","labore","et","dolore","magna","aliqua","enim","ad","minim","veniam","quis","nostrud","exercitation","ullamco","laboris","nisi","aliquip","ex","ea","commodo","consequat","duis","aute","irure","in","reprehenderit","voluptate","velit","esse","cillum","fugiat","nulla","pariatur","excepteur","sint","occaecat","cupidatat","non","proident","sunt","culpa","qui","officia","deserunt","mollit","anim","id","est","laborum"];window.generateLorem=function(){const t=document.getElementById("lorem-type"),n=document.getElementById("lorem-count"),e=document.getElementById("lorem-output");if(!t||!n||!e)return;const s=t.value,o=parseInt(n.value);let a="";if(s==="words"){const r=[];for(let c=0;c<o;c++)r.push(u[Math.floor(Math.random()*u.length)]);a=r.join(" ")}else if(s==="sentences"){const r=[];for(let c=0;c<o;c++){const p=Math.floor(Math.random()*10)+5,l=[];for(let g=0;g<p;g++)l.push(u[Math.floor(Math.random()*u.length)]);r.push(l.join(" ").charAt(0).toUpperCase()+l.join(" ").slice(1)+".")}a=r.join(" ")}else if(s==="paragraphs"){const r=[];for(let c=0;c<o;c++){const p=Math.floor(Math.random()*5)+3,l=[];for(let g=0;g<p;g++){const I=Math.floor(Math.random()*10)+5,y=[];for(let E=0;E<I;E++)y.push(u[Math.floor(Math.random()*u.length)]);l.push(y.join(" ").charAt(0).toUpperCase()+y.join(" ").slice(1)+".")}r.push(l.join(" "))}a=r.join(`

`)}e.value=a,d("itemsGenerated"),d("toolsUsed")},window.generatePassword=function(){const t=parseInt(document.getElementById("password-length").value),n=document.getElementById("include-uppercase").checked,e=document.getElementById("include-lowercase").checked,s=document.getElementById("include-numbers").checked,o=document.getElementById("include-symbols").checked;let a="";if(n&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e&&(a+="abcdefghijklmnopqrstuvwxyz"),s&&(a+="0123456789"),o&&(a+="!@#$%^&*()_+-=[]{}|;:,.<>?"),!a){alert("Please select at least one character type");return}let r="";for(let c=0;c<t;c++)r+=a.charAt(Math.floor(Math.random()*a.length));document.getElementById("password-output").value=r,d("itemsGenerated"),d("toolsUsed")};let h="encode";window.setBase64Mode=function(t){h=t;const n=document.getElementById("encode-btn"),e=document.getElementById("decode-btn"),s=document.getElementById("base64-label"),o=document.getElementById("base64-process-btn");t==="encode"?(n.className="flex-1 bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors",e.className="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition-colors",s.textContent="Text to Encode",o.textContent="Encode Text"):(n.className="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition-colors",e.className="flex-1 bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors",s.textContent="Base64 to Decode",o.textContent="Decode Text")},window.processBase64=function(){const t=document.getElementById("base64-input").value,n=document.getElementById("base64-output");try{h==="encode"?n.value=btoa(t):n.value=atob(t),d("itemsGenerated"),d("toolsUsed")}catch{alert("Error: Invalid input for "+h)}},window.formatJSON=function(){const t=document.getElementById("json-input").value,n=document.getElementById("json-output");try{const e=JSON.parse(t);n.value=JSON.stringify(e,null,2),m("✅ Valid JSON formatted successfully","text-green-600"),d("itemsGenerated"),d("toolsUsed")}catch(e){m("❌ Invalid JSON: "+e.message,"text-red-600")}},window.minifyJSON=function(){const t=document.getElementById("json-input").value,n=document.getElementById("json-output");try{const e=JSON.parse(t);n.value=JSON.stringify(e),m("✅ JSON minified successfully","text-green-600"),d("itemsGenerated"),d("toolsUsed")}catch(e){m("❌ Invalid JSON: "+e.message,"text-red-600")}},window.validateJSON=function(){const t=document.getElementById("json-input").value;try{JSON.parse(t),m("✅ Valid JSON!","text-green-600"),d("toolsUsed")}catch(n){m("❌ Invalid JSON: "+n.message,"text-red-600")}};function m(t,n){const e=document.getElementById("json-status");e.textContent=t,e.className=`text-sm ${n}`,e.classList.remove("hidden")}window.copyToClipboard=async function(t,n){let e=n;if(!e&&t){const s=document.getElementById(t);s&&(e=s.value)}if(e)try{await navigator.clipboard.writeText(e),d("copiesMade")}catch{const o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),d("copiesMade")}},f(),setTimeout(()=>{typeof window.generatePalette=="function"&&window.generatePalette()},100)});
