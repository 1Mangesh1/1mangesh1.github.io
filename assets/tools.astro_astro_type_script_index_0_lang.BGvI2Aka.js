document.addEventListener("DOMContentLoaded",function(){let i={toolsUsed:0,itemsGenerated:0,copiesMade:0};const v=localStorage.getItem("devToolsStats");v&&(i=JSON.parse(v),f());function c(n){i[n]++,localStorage.setItem("devToolsStats",JSON.stringify(i)),f()}function f(){const n=document.getElementById("tools-used"),t=document.getElementById("items-generated"),e=document.getElementById("copies-made");n&&(n.textContent=i.toolsUsed.toString()),t&&(t.textContent=i.itemsGenerated.toString()),e&&(e.textContent=i.copiesMade.toString())}window.generateQR=function(){const n=document.getElementById("qr-input");if(!n)return;const t=n.value.trim();if(!t){alert("Please enter some text or URL");return}const e=document.getElementById("qr-code");if(!e)return;e.innerHTML="Generating QR code...";const a=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(t)}`,o=document.createElement("img");o.src=a,o.alt="QR Code",o.className="border rounded",o.onload=function(){if(!e)return;e.innerHTML="",e.appendChild(o);const s=document.getElementById("qr-result");s&&s.classList.remove("hidden"),c("itemsGenerated"),c("toolsUsed")},o.onerror=function(){e&&(e.innerHTML="Error loading QR code. Please try again.")}},window.downloadQR=function(){const n=document.querySelector("#qr-code canvas"),t=document.querySelector("#qr-code img");if(n){const e=document.createElement("a");e.download="qrcode.png",e.href=n.toDataURL(),e.click()}else if(t){const e=document.createElement("a");e.download="qrcode.png",e.href=t.src,e.click()}else alert("No QR code to download. Please generate one first.")},window.generatePalette=function(){const n=document.getElementById("base-color");if(!n)return;const t=n.value,e=w(t),a=document.getElementById("color-palette"),o=document.getElementById("color-codes");!a||!o||(a.innerHTML="",o.innerHTML="",e.forEach(s=>{const d=document.createElement("div");d.className="h-12 rounded cursor-pointer hover:scale-105 transition-transform",d.style.backgroundColor=s,d.title=s,d.onclick=()=>window.copyToClipboard(null,s),a.appendChild(d);const r=document.createElement("div");r.className="text-gray-600 dark:text-gray-400 cursor-pointer hover:text-blue-600",r.textContent=s.toUpperCase(),r.onclick=()=>window.copyToClipboard(null,s),o.appendChild(r)}),c("itemsGenerated"),c("toolsUsed"))};function w(n){const t=C(n),e=[];for(let a=0;a<5;a++){const o=Math.max(10,Math.min(90,t.l+(a-2)*20)),s=Math.max(10,Math.min(100,t.s+(a-2)*10));e.push(b(t.h,s,o))}return e}function C(n){const t=parseInt(n.slice(1,3),16)/255,e=parseInt(n.slice(3,5),16)/255,a=parseInt(n.slice(5,7),16)/255,o=Math.max(t,e,a),s=Math.min(t,e,a);let d=0,r=0;const g=(o+s)/2;if(o===s)d=r=0;else{const l=o-s;switch(r=g>.5?l/(2-o-s):l/(o+s),o){case t:d=(e-a)/l+(e<a?6:0);break;case e:d=(a-t)/l+2;break;case a:d=(t-e)/l+4;break}d/=6}return{h:Math.round(d*360),s:Math.round(r*100),l:Math.round(g*100)}}function b(n,t,e){e/=100;const a=t*Math.min(e,1-e)/100,o=s=>{const d=(s+n/30)%12,r=e-a*Math.max(Math.min(d-3,9-d,1),-1);return Math.round(255*r).toString(16).padStart(2,"0")};return`#${o(0)}${o(8)}${o(4)}`}const u=["lorem","ipsum","dolor","sit","amet","consectetur","adipiscing","elit","sed","do","eiusmod","tempor","incididunt","ut","labore","et","dolore","magna","aliqua","enim","ad","minim","veniam","quis","nostrud","exercitation","ullamco","laboris","nisi","aliquip","ex","ea","commodo","consequat","duis","aute","irure","in","reprehenderit","voluptate","velit","esse","cillum","fugiat","nulla","pariatur","excepteur","sint","occaecat","cupidatat","non","proident","sunt","culpa","qui","officia","deserunt","mollit","anim","id","est","laborum"];window.generateLorem=function(){const n=document.getElementById("lorem-type"),t=document.getElementById("lorem-count"),e=document.getElementById("lorem-output");if(!n||!t||!e)return;const a=n.value,o=parseInt(t.value);let s="";if(a==="words"){const d=[];for(let r=0;r<o;r++)d.push(u[Math.floor(Math.random()*u.length)]);s=d.join(" ")}else if(a==="sentences"){const d=[];for(let r=0;r<o;r++){const g=Math.floor(Math.random()*10)+5,l=[];for(let p=0;p<g;p++)l.push(u[Math.floor(Math.random()*u.length)]);d.push(l.join(" ").charAt(0).toUpperCase()+l.join(" ").slice(1)+".")}s=d.join(" ")}else if(a==="paragraphs"){const d=[];for(let r=0;r<o;r++){const g=Math.floor(Math.random()*5)+3,l=[];for(let p=0;p<g;p++){const M=Math.floor(Math.random()*10)+5,I=[];for(let x=0;x<M;x++)I.push(u[Math.floor(Math.random()*u.length)]);l.push(I.join(" ").charAt(0).toUpperCase()+I.join(" ").slice(1)+".")}d.push(l.join(" "))}s=d.join(`

`)}e.value=s,c("itemsGenerated"),c("toolsUsed")},window.generatePassword=function(){const n=parseInt(document.getElementById("password-length").value),t=document.getElementById("include-uppercase").checked,e=document.getElementById("include-lowercase").checked,a=document.getElementById("include-numbers").checked,o=document.getElementById("include-symbols").checked;let s="";if(t&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e&&(s+="abcdefghijklmnopqrstuvwxyz"),a&&(s+="0123456789"),o&&(s+="!@#$%^&*()_+-=[]{}|;:,.<>?"),!s){alert("Please select at least one character type");return}let d="";for(let r=0;r<n;r++)d+=s.charAt(Math.floor(Math.random()*s.length));document.getElementById("password-output").value=d,c("itemsGenerated"),c("toolsUsed")};let h="encode";window.setBase64Mode=function(n){h=n;const t=document.getElementById("encode-btn"),e=document.getElementById("decode-btn"),a=document.getElementById("base64-label"),o=document.getElementById("base64-process-btn");n==="encode"?(t.className="flex-1 bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors",e.className="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition-colors",a.textContent="Text to Encode",o.textContent="Encode Text"):(t.className="flex-1 bg-gray-600 text-white py-2 rounded-lg hover:bg-gray-700 transition-colors",e.className="flex-1 bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors",a.textContent="Base64 to Decode",o.textContent="Decode Text")},window.processBase64=function(){const n=document.getElementById("base64-input").value,t=document.getElementById("base64-output");try{h==="encode"?t.value=btoa(n):t.value=atob(n),c("itemsGenerated"),c("toolsUsed")}catch{alert("Error: Invalid input for "+h)}},window.formatJSON=function(){const n=document.getElementById("json-input").value,t=document.getElementById("json-output");try{const e=JSON.parse(n);t.value=JSON.stringify(e,null,2),m("✅ Valid JSON formatted successfully","text-green-600"),c("itemsGenerated"),c("toolsUsed")}catch(e){m("❌ Invalid JSON: "+e.message,"text-red-600")}},window.minifyJSON=function(){const n=document.getElementById("json-input").value,t=document.getElementById("json-output");try{const e=JSON.parse(n);t.value=JSON.stringify(e),m("✅ JSON minified successfully","text-green-600"),c("itemsGenerated"),c("toolsUsed")}catch(e){m("❌ Invalid JSON: "+e.message,"text-red-600")}},window.validateJSON=function(){const n=document.getElementById("json-input").value;try{JSON.parse(n),m("✅ Valid JSON!","text-green-600"),c("toolsUsed")}catch(t){m("❌ Invalid JSON: "+t.message,"text-red-600")}};function m(n,t){const e=document.getElementById("json-status");e.textContent=n,e.className=`text-sm ${t}`,e.classList.remove("hidden")}window.copyToClipboard=async function(n,t){let e=t;if(!e&&n){const a=document.getElementById(n);a&&(e=a.value)}if(e)try{await navigator.clipboard.writeText(e),c("copiesMade")}catch{const o=document.createElement("textarea");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),c("copiesMade")}},window.testRegex=function(){const n=document.getElementById("regex-pattern").value,t=document.getElementById("regex-flags").value,e=document.getElementById("regex-test").value,a=document.getElementById("regex-result");try{const o=new RegExp(n,t),s=e.match(o);s&&s.length>0?a.innerHTML=`<span class="text-green-600">✓ ${s.length} match(es) found:</span><br><br>`+s.map((d,r)=>`<span class="bg-yellow-200 dark:bg-yellow-800 px-1">${d}</span>`).join(", "):a.innerHTML='<span class="text-red-600">✗ No matches found</span>',c("toolsUsed")}catch(o){a.innerHTML=`<span class="text-red-600">Error: ${o.message}</span>`}},window.showDiff=function(){const n=document.getElementById("diff-original").value.split(`
`),t=document.getElementById("diff-modified").value.split(`
`),e=document.getElementById("diff-result");let a="";const o=Math.max(n.length,t.length);for(let s=0;s<o;s++){const d=n[s]||"",r=t[s]||"";d===r?a+=`<div class="text-gray-400">&nbsp; ${E(d)}</div>`:(d&&(a+=`<div class="text-red-400">- ${E(d)}</div>`),r&&(a+=`<div class="text-green-400">+ ${E(r)}</div>`))}e.innerHTML=a||'<span class="text-gray-400">No differences</span>',c("toolsUsed")};function E(n){const t=document.createElement("div");return t.textContent=n,t.innerHTML}window.timestampToDate=function(){const n=parseInt(document.getElementById("unix-timestamp").value);if(isNaN(n)){alert("Please enter a valid timestamp");return}const t=new Date(n*1e3);document.getElementById("human-date").value=t.toISOString().slice(0,16),document.getElementById("local-time").textContent=t.toLocaleString(),document.getElementById("utc-time").textContent=t.toUTCString(),document.getElementById("iso-time").textContent=t.toISOString(),c("toolsUsed")},window.dateToTimestamp=function(){const n=document.getElementById("human-date").value;if(!n){alert("Please select a date");return}const t=new Date(n),e=Math.floor(t.getTime()/1e3);document.getElementById("unix-timestamp").value=e,document.getElementById("local-time").textContent=t.toLocaleString(),document.getElementById("utc-time").textContent=t.toUTCString(),document.getElementById("iso-time").textContent=t.toISOString(),c("toolsUsed")},window.setCurrentTimestamp=function(){const n=new Date;document.getElementById("unix-timestamp").value=Math.floor(n.getTime()/1e3),document.getElementById("human-date").value=n.toISOString().slice(0,16),document.getElementById("local-time").textContent=n.toLocaleString(),document.getElementById("utc-time").textContent=n.toUTCString(),document.getElementById("iso-time").textContent=n.toISOString(),c("toolsUsed")};function y(){const n=document.getElementById("gradient-color1").value,t=document.getElementById("gradient-color2").value,e=document.getElementById("gradient-angle").value,a=document.getElementById("gradient-type").value;document.getElementById("gradient-angle-value").textContent=e+"°";let o;a==="linear"?o=`linear-gradient(${e}deg, ${n}, ${t})`:o=`radial-gradient(circle, ${n}, ${t})`,document.getElementById("gradient-preview").style.background=o,document.getElementById("gradient-output").value=`background: ${o};`}document.getElementById("gradient-color1")?.addEventListener("input",y),document.getElementById("gradient-color2")?.addEventListener("input",y),document.getElementById("gradient-angle")?.addEventListener("input",y),document.getElementById("gradient-type")?.addEventListener("change",y);function B(){const n=document.getElementById("cron-minute").value,t=document.getElementById("cron-hour").value,e=document.getElementById("cron-day").value,a=document.getElementById("cron-month").value,o=document.getElementById("cron-weekday").value,s=`${n} ${t} ${e} ${a} ${o}`;document.getElementById("cron-output").textContent=s,document.getElementById("cron-description").textContent=S(n,t,e,a,o)}function S(n,t,e,a,o){return n==="*"&&t==="*"&&e==="*"&&a==="*"&&o==="*"?"Runs every minute":n==="0"&&t==="*"&&e==="*"&&a==="*"&&o==="*"?"Runs every hour at minute 0":n==="0"&&t==="0"&&e==="*"&&a==="*"&&o==="*"?"Runs daily at midnight":n==="0"&&t==="0"&&e==="*"&&a==="*"&&o==="0"?"Runs every Sunday at midnight":n==="0"&&t==="0"&&e==="1"&&a==="*"&&o==="*"?"Runs on the 1st of every month at midnight":`Runs at minute ${n}, hour ${t}, day ${e}, month ${a}, weekday ${o}`}window.setCronPreset=function(n){const t=n.split(" ");document.getElementById("cron-minute").value=t[0],document.getElementById("cron-hour").value=t[1],document.getElementById("cron-day").value=t[2],document.getElementById("cron-month").value=t[3],document.getElementById("cron-weekday").value=t[4],B(),c("toolsUsed")},["cron-minute","cron-hour","cron-day","cron-month","cron-weekday"].forEach(n=>{document.getElementById(n)?.addEventListener("input",B)}),f(),setTimeout(()=>{typeof window.generatePalette=="function"&&window.generatePalette()},100)});
