const n=document.getElementById("art-canvas"),e=n.getContext("2d"),m=document.getElementById("art-style"),E=document.getElementById("regenerate-btn"),P=document.getElementById("download-btn"),b=document.getElementById("animate-btn"),k=document.querySelectorAll(".palette-btn");let y=null,d=!1;const T={neon:["#ff00ff","#00ffff","#ff6b6b","#feca57","#48dbfb"],sunset:["#ff6b6b","#feca57","#ff9ff3","#f368e0","#ff9f43"],ocean:["#0077b6","#00b4d8","#90e0ef","#caf0f8","#03045e"],forest:["#2d6a4f","#40916c","#52b788","#74c69d","#95d5b2"],monochrome:["#000000","#333333","#666666","#999999","#ffffff"]};let x="neon";function a(t,o){return Math.random()*(o-t)+t}function g(){const t=T[x];return t[Math.floor(Math.random()*t.length)]}function I(){e.fillStyle="#0a0a0a",e.fillRect(0,0,n.width,n.height);const t=20,o=Math.ceil(n.width/t),r=Math.ceil(n.height/t),s=a(0,1e3);for(let l=0;l<r;l++)for(let i=0;i<o;i++){const c=p(i*.1,l*.1,s)*Math.PI*4,h=t*.8;e.save(),e.translate(i*t+t/2,l*t+t/2),e.rotate(c),e.strokeStyle=g(),e.lineWidth=2,e.globalAlpha=.7,e.beginPath(),e.moveTo(-h/2,0),e.lineTo(h/2,0),e.stroke(),e.restore()}}function p(t,o,r){return Math.sin(t*12.9898+o*78.233+r*37.719)*43758.5453%1}function L(){e.fillStyle="#0a0a0a",e.fillRect(0,0,n.width,n.height);const t=Math.floor(a(5,15));for(let o=0;o<t;o++){const r=a(100,n.width-100),s=a(100,n.height-100),l=a(50,200),i=Math.floor(a(5,20));for(let c=i;c>0;c--){const h=c/i*l;e.beginPath(),e.arc(r,s,h,0,Math.PI*2),e.strokeStyle=g(),e.lineWidth=a(1,4),e.globalAlpha=a(.3,.8),e.stroke()}}}let f=[];function M(){f=[];for(let t=0;t<200;t++)f.push({x:a(0,n.width),y:a(0,n.height),vx:a(-2,2),vy:a(-2,2),color:g(),size:a(2,6)})}function S(){e.fillStyle="rgba(10, 10, 10, 0.1)",e.fillRect(0,0,n.width,n.height),f.forEach(t=>{e.beginPath(),e.arc(t.x,t.y,t.size,0,Math.PI*2),e.fillStyle=t.color,e.globalAlpha=.8,e.fill(),d&&(t.x+=t.vx,t.y+=t.vy,(t.x<0||t.x>n.width)&&(t.vx*=-1),(t.y<0||t.y>n.height)&&(t.vy*=-1))}),e.globalAlpha=.2;for(let t=0;t<f.length;t++)for(let o=t+1;o<f.length;o++){const r=f[t].x-f[o].x,s=f[t].y-f[o].y;Math.sqrt(r*r+s*s)<80&&(e.beginPath(),e.moveTo(f[t].x,f[t].y),e.lineTo(f[o].x,f[o].y),e.strokeStyle=f[t].color,e.stroke())}}function B(){e.fillStyle="#0a0a0a",e.fillRect(0,0,n.width,n.height);const t=Math.floor(a(5,15));for(let o=0;o<t;o++){const r=a(20,100),s=a(.005,.02),l=n.height/(t+1)*(o+1),i=a(0,Math.PI*2);e.beginPath(),e.moveTo(0,l);for(let c=0;c<=n.width;c+=2){const h=l+Math.sin(c*s+i)*r;e.lineTo(c,h)}e.strokeStyle=g(),e.lineWidth=a(2,5),e.globalAlpha=.7,e.stroke()}}function R(){e.fillStyle="#0a0a0a",e.fillRect(0,0,n.width,n.height);const t=20,o=Math.floor(n.width/t),r=Math.floor(n.height/t);e.strokeStyle=g(),e.lineWidth=2,e.globalAlpha=.8;for(let s=0;s<r;s++)for(let l=0;l<o;l++){const i=l*t,c=s*t;e.beginPath(),Math.random()>.5?(e.moveTo(i,c),e.lineTo(i+t,c+t)):(e.moveTo(i+t,c),e.lineTo(i,c+t)),e.strokeStyle=g(),e.stroke()}}function W(){e.fillStyle="#0a0a0a",e.fillRect(0,0,n.width,n.height);function t(o,r,s,l,i){if(i===0||s<2)return;const c=o+Math.cos(l)*s,h=r+Math.sin(l)*s;e.beginPath(),e.moveTo(o,r),e.lineTo(c,h),e.strokeStyle=g(),e.lineWidth=i*.5,e.globalAlpha=.8,e.stroke();const w=s*a(.6,.8),v=a(.3,.6);t(c,h,w,l-v,i-1),t(c,h,w,l+v,i-1)}t(n.width/2,n.height,120,-Math.PI/2,10)}function u(){switch(e.globalAlpha=1,m.value){case"flow-field":I();break;case"circles":L();break;case"particles":M(),S();break;case"waves":B();break;case"maze":R();break;case"tree":W();break}}function A(){d&&(m.value==="particles"&&S(),y=requestAnimationFrame(A))}n.addEventListener("click",u);E.addEventListener("click",u);P.addEventListener("click",()=>{const t=document.createElement("a");t.download=`generative-art-${Date.now()}.png`,t.href=n.toDataURL(),t.click()});b.addEventListener("click",()=>{d=!d,b.textContent=d?"Stop":"Animate",d?(m.value!=="particles"&&(m.value="particles",M()),A()):y&&cancelAnimationFrame(y)});m.addEventListener("change",()=>{d&&m.value!=="particles"&&(d=!1,b.textContent="Animate",y&&cancelAnimationFrame(y)),u()});k.forEach(t=>{t.addEventListener("click",()=>{k.forEach(o=>o.classList.remove("border-white")),t.classList.add("border-white"),x=t.dataset.palette||"neon",u()})});u();
