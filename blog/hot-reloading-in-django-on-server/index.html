<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="Learn how to implement hot reloading for Django applications in a staging environment with Docker Compose and Gunicorn for improved development experience."><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="manifest" href="/site.webmanifest"><meta name="generator" content="Astro v5.10.0"><!-- Primary Meta Tags --><title>Hot Reload Implementation for Django Staging Environment - Mangesh&#39;s Blog</title><meta name="title" content="Hot Reload Implementation for Django Staging Environment - Mangesh's Blog"><meta name="description" content="Learn how to implement hot reloading for Django applications in a staging environment with Docker Compose and Gunicorn for improved development experience."><meta name="author" content="Mangesh Bide"><link rel="canonical" href="https://mangeshbide.tech/blog/hot-reloading-in-django-on-server/"><!-- Robots --><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://mangeshbide.tech/blog/hot-reloading-in-django-on-server/"><meta property="og:title" content="Hot Reload Implementation for Django Staging Environment - Mangesh's Blog"><meta property="og:description" content="Learn how to implement hot reloading for Django applications in a staging environment with Docker Compose and Gunicorn for improved development experience."><meta property="og:image" content="https://mangeshbide.tech/me.jpg"><meta property="og:site_name" content="Mangesh Bide"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://mangeshbide.tech/blog/hot-reloading-in-django-on-server/"><meta property="twitter:title" content="Hot Reload Implementation for Django Staging Environment - Mangesh's Blog"><meta property="twitter:description" content="Learn how to implement hot reloading for Django applications in a staging environment with Docker Compose and Gunicorn for improved development experience."><meta property="twitter:image" content="https://mangeshbide.tech/me.jpg"><meta property="twitter:creator" content="@Mangesh_Bide"><!-- Additional SEO --><meta name="keywords" content="Mangesh Bide, Software Developer, Python, Django, Machine Learning, Web Development, Programming, Tech Blog"><meta name="theme-color" content="#3b82f6"><!-- Structured Data --><script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Mangesh Bide",
        "url": "https://mangeshbide.tech",
        "image": "https://mangeshbide.tech/me.jpg",
        "jobTitle": "Software Developer",
        "worksFor": {
          "@type": "Organization",
          "name": "Houseworks Technologies"
        },
        "alumniOf": "Savitribai Phule Pune University",
        "knowsAbout": ["Python", "Django", "Machine Learning", "Web Development", "TensorFlow"],
        "sameAs": [
          "https://github.com/1mangesh1",
          "https://x.com/Mangesh_Bide",
          "https://linkedin.com/in/mangesh-bide/"
        ]
      }
    </script><link rel="stylesheet" href="/assets/about.Dm3Mz9vv.css"></head> <body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200"> <div class="min-h-screen flex flex-col"> <header class="border-b border-gray-200 dark:border-gray-700"> <nav class="max-w-4xl mx-auto px-4 py-6"> <!-- Desktop Navigation --> <div class="flex justify-between items-center"> <div class="flex items-center space-x-8"> <a href="/" class="text-xl font-bold hover:text-blue-600 dark:hover:text-blue-400 transition-colors">
by mangesh
</a> <div class="hidden md:flex space-x-6"> <a href="/blog" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Blog</a> <a href="/portfolio" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Portfolio</a> <a href="/about" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">About</a> <a href="/uses" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Uses</a> <a href="/contact" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Contact</a> <a href="/resume" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Resume</a> </div> </div> <div class="flex items-center space-x-2"> <a href="/search" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" aria-label="Search"> <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </a> <button id="theme-toggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" aria-label="Toggle theme"> <svg class="w-5 h-5 hidden dark:block" fill="currentColor" viewBox="0 0 20 20"> <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path> </svg> <svg class="w-5 h-5 block dark:hidden" fill="currentColor" viewBox="0 0 20 20"> <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path> </svg> </button> <!-- Mobile menu button --> <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" aria-label="Toggle mobile menu"> <svg id="menu-open-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path> </svg> <svg id="menu-close-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path> </svg> </button> </div> </div> <!-- Mobile Navigation --> <div id="mobile-menu" class="hidden md:hidden"> <div class="pt-4 pb-2 space-y-1 border-t border-gray-200 dark:border-gray-700 mt-4"> <a href="/blog" class="block px-3 py-2 rounded-md text-base font-medium hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
Blog
</a> <a href="/portfolio" class="block px-3 py-2 rounded-md text-base font-medium hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
Portfolio
</a> <a href="/about" class="block px-3 py-2 rounded-md text-base font-medium hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
About
</a> <a href="/uses" class="block px-3 py-2 rounded-md text-base font-medium hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
Uses
</a> <a href="/contact" class="block px-3 py-2 rounded-md text-base font-medium hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
Contact
</a> <a href="/resume" class="block px-3 py-2 rounded-md text-base font-medium hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
Resume
</a> </div> </div> </nav> </header> <main class="flex-1">  <article class="max-w-4xl mx-auto px-4 py-12"> <header class="mb-8"> <h1 class="text-4xl font-bold mb-4">Hot Reload Implementation for Django Staging Environment</h1> <time class="text-gray-600 dark:text-gray-400"> June 21, 2025 </time> </header> <div class="prose prose-lg dark:prose-invert max-w-none"> <p>This guide describes the implementation of hot reloading for a Django application in a staging environment with Docker Compose. Hot reloading enables automatic application refreshes when code changes are detected, significantly improving the development experience by eliminating manual restarts.</p>
<h2 id="architecture-components">Architecture Components</h2>
<p>The hot reload implementation consists of several key components:</p>
<ol>
<li><strong>Docker Compose volume mapping</strong> - To sync local files with the container</li>
<li><strong>Gunicorn configuration</strong> - With reload mode enabled</li>
<li><strong>Django settings</strong> - Optimized for development/staging</li>
<li><strong>Start script</strong> - For proper initialization and monitoring</li>
<li><strong>Traefik configuration</strong> - For routing HTTP traffic without forcing HTTPS</li>
<li><strong>Dependencies</strong> - Required packages for hot reloading</li>
</ol>
<h2 id="docker-compose-configuration">Docker Compose Configuration</h2>
<p>The <code>staging.yml</code> file contains the configuration for the Docker Compose environment:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"3"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  staging_postgres_data_backups</span><span style="color:#E1E4E8">: {}</span></span>
<span class="line"><span style="color:#85E89D">  staging_postgres_data</span><span style="color:#E1E4E8">: {}</span></span>
<span class="line"><span style="color:#85E89D">  staging_traefik</span><span style="color:#E1E4E8">: {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">services</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  django</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">&#x26;</span><span style="color:#B392F0">django</span></span>
<span class="line"><span style="color:#85E89D">    build</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      context</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">.</span></span>
<span class="line"><span style="color:#85E89D">      dockerfile</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./compose/staging/django/Dockerfile</span></span>
<span class="line"><span style="color:#85E89D">    image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my_awesome_project_staging_django</span></span>
<span class="line"><span style="color:#85E89D">    depends_on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">postgres</span></span>
<span class="line"><span style="color:#85E89D">    env_file</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">./.envs/.staging/.django</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">./.envs/.staging/.postgres</span></span>
<span class="line"><span style="color:#85E89D">    command</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/start</span></span>
<span class="line"><span style="color:#85E89D">    volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">.:/app:rw</span><span style="color:#6A737D"> # Key configuration for hot reloading - maps local files to container</span></span></code></pre>
<p>The crucial part for hot reloading is the volume mapping (<code>- .:/app:rw</code>), which ensures that any changes to the local codebase are immediately reflected within the container.</p>
<h2 id="gunicorn-configuration">Gunicorn Configuration</h2>
<p>Gunicorn is configured to watch for file changes and automatically reload:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#6A737D"># config/gunicorn.config.py</span></span>
<span class="line"><span style="color:#E1E4E8">bind </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "0.0.0.0:5000"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Sample Worker processes</span></span>
<span class="line"><span style="color:#E1E4E8">workers </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 6</span></span>
<span class="line"><span style="color:#F97583">try</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">    import</span><span style="color:#E1E4E8"> uvicorn</span></span>
<span class="line"><span style="color:#E1E4E8">    worker_class </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "uvicorn.workers.UvicornWorker"</span></span>
<span class="line"><span style="color:#F97583">except</span><span style="color:#79B8FF"> ImportError</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    worker_class </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> "sync"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">timeout </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 180</span></span>
<span class="line"><span style="color:#E1E4E8">max_requests </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#E1E4E8">max_requests_jitter </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 5</span></span>
<span class="line"><span style="color:#79B8FF">reload</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> True</span><span style="color:#6A737D">  # Enable hot reloading</span></span>
<span class="line"><span style="color:#E1E4E8">reload_extra_files </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> []  </span><span style="color:#6A737D"># Add any extra files to watch if needed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Ignore specific file patterns for reloading</span></span>
<span class="line"><span style="color:#E1E4E8">reload_ignore_files </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">".*\.pyc"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">".*\.py~"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">".*\.log"</span><span style="color:#E1E4E8">]</span></span></code></pre>
<p>The key settings for hot reloading are:</p>
<ul>
<li><code>reload = True</code> - Enables automatic reloading on file changes</li>
<li><code>max_requests = 1</code> - Makes workers restart after handling a single request</li>
<li><code>max_requests_jitter = 5</code> - Adds randomness to restart times to prevent all workers restarting simultaneously</li>
<li><code>reload_ignore_files</code> - Patterns for files to ignore during hot reloading</li>
</ul>
<h2 id="django-start-script">Django Start Script</h2>
<p>The start script (<code>compose/staging/django/start</code>) initializes the environment and launches Gunicorn:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> errexit</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> pipefail</span></span>
<span class="line"><span style="color:#79B8FF">set</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> nounset</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Starting Django application in staging mode..."</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Install watchdog if not already installed</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#F97583"> !</span><span style="color:#B392F0"> pip</span><span style="color:#9ECBFF"> list</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> grep</span><span style="color:#79B8FF"> -q</span><span style="color:#9ECBFF"> "watchdog"</span><span style="color:#E1E4E8">; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#79B8FF">    echo</span><span style="color:#9ECBFF"> "Installing watchdog..."</span></span>
<span class="line"><span style="color:#B392F0">    pip</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> watchdog</span></span>
<span class="line"><span style="color:#F97583">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Set environment variables if not set</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> [ </span><span style="color:#F97583">-z</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">USE_DOCKER</span><span style="color:#F97583">:-</span><span style="color:#9ECBFF">}"</span><span style="color:#E1E4E8"> ]; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#79B8FF">    echo</span><span style="color:#9ECBFF"> "Setting USE_DOCKER=yes"</span></span>
<span class="line"><span style="color:#F97583">    export</span><span style="color:#E1E4E8"> USE_DOCKER</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">yes</span></span>
<span class="line"><span style="color:#F97583">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Check if Django settings module is properly set</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> [ </span><span style="color:#F97583">-z</span><span style="color:#9ECBFF"> "${</span><span style="color:#E1E4E8">DJANGO_SETTINGS_MODULE</span><span style="color:#F97583">:-</span><span style="color:#9ECBFF">}"</span><span style="color:#E1E4E8"> ]; </span><span style="color:#F97583">then</span></span>
<span class="line"><span style="color:#79B8FF">    echo</span><span style="color:#9ECBFF"> "Setting DJANGO_SETTINGS_MODULE=config.settings.staging"</span></span>
<span class="line"><span style="color:#F97583">    export</span><span style="color:#E1E4E8"> DJANGO_SETTINGS_MODULE</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">config.settings.staging</span></span>
<span class="line"><span style="color:#F97583">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Using settings module: </span><span style="color:#E1E4E8">$DJANGO_SETTINGS_MODULE</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Run initial setup</span></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Collecting static files..."</span></span>
<span class="line"><span style="color:#B392F0">python</span><span style="color:#9ECBFF"> /app/manage.py</span><span style="color:#9ECBFF"> collectstatic</span><span style="color:#79B8FF"> --noinput</span><span style="color:#F97583"> ||</span><span style="color:#79B8FF"> echo</span><span style="color:#9ECBFF"> "Warning: collectstatic failed"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Running migrations..."</span></span>
<span class="line"><span style="color:#B392F0">python</span><span style="color:#9ECBFF"> /app/manage.py</span><span style="color:#9ECBFF"> migrate</span><span style="color:#79B8FF"> --noinput</span><span style="color:#F97583"> ||</span><span style="color:#79B8FF"> echo</span><span style="color:#9ECBFF"> "Warning: migrations failed"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Starting application server with hot reload..."</span></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "Hot reload will restart the server on code changes"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Start Gunicorn with hot reloading</span></span>
<span class="line"><span style="color:#79B8FF">exec</span><span style="color:#9ECBFF"> /opt/venv/bin/gunicorn</span><span style="color:#9ECBFF"> config.asgi</span><span style="color:#79B8FF"> --config</span><span style="color:#9ECBFF"> config/gunicorn.config.py</span><span style="color:#79B8FF"> --chdir=/app</span></span></code></pre>
<p>This script:</p>
<ol>
<li>Ensures watchdog is installed</li>
<li>Sets necessary environment variables</li>
<li>Runs Django’s collectstatic and migrate commands</li>
<li>Starts Gunicorn with the hot reload configuration</li>
</ol>
<h2 id="django-settings">Django Settings</h2>
<p>The <code>config/settings/staging.py</code> file contains the Django settings optimized for staging with hot reloading:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="python"><code><span class="line"><span style="color:#6A737D"># Key settings for hot reloading</span></span>
<span class="line"><span style="color:#79B8FF">DEBUG</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> True</span></span>
<span class="line"><span style="color:#79B8FF">ALLOWED_HOSTS</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"*"</span><span style="color:#E1E4E8">]  </span><span style="color:#6A737D"># Allow all hosts for staging</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># CSRF Settings for local development</span></span>
<span class="line"><span style="color:#79B8FF">CSRF_TRUSTED_ORIGINS</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"http://localhost"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"https://localhost"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"http://0.0.0.0"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"https://0.0.0.0"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Security settings relaxed for development</span></span>
<span class="line"><span style="color:#79B8FF">SECURE_PROXY_SSL_HEADER</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> None</span></span>
<span class="line"><span style="color:#79B8FF">SECURE_SSL_REDIRECT</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> False</span></span>
<span class="line"><span style="color:#79B8FF">SESSION_COOKIE_SECURE</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> False</span></span>
<span class="line"><span style="color:#79B8FF">CSRF_COOKIE_SECURE</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Development tools</span></span>
<span class="line"><span style="color:#79B8FF">INSTALLED_APPS</span><span style="color:#F97583"> +=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"django_extensions"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#9ECBFF"> "debug_toolbar"</span><span style="color:#F97583"> not</span><span style="color:#F97583"> in</span><span style="color:#79B8FF"> INSTALLED_APPS</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#79B8FF">    INSTALLED_APPS</span><span style="color:#F97583"> +=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"debug_toolbar"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#79B8FF">    MIDDLEWARE</span><span style="color:#F97583"> +=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"debug_toolbar.middleware.DebugToolbarMiddleware"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># For Docker usage</span></span>
<span class="line"><span style="color:#79B8FF">INTERNAL_IPS</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"127.0.0.1"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"10.0.2.2"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"0.0.0.0"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#F97583">if</span><span style="color:#E1E4E8"> env(</span><span style="color:#9ECBFF">"USE_DOCKER"</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">==</span><span style="color:#9ECBFF"> "yes"</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">    import</span><span style="color:#E1E4E8"> socket</span></span>
<span class="line"><span style="color:#E1E4E8">    hostname, _, ips </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> socket.gethostbyname_ex(socket.gethostname())</span></span>
<span class="line"><span style="color:#79B8FF">    INTERNAL_IPS</span><span style="color:#F97583"> +=</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"."</span><span style="color:#E1E4E8">.join(ip.split(</span><span style="color:#9ECBFF">"."</span><span style="color:#E1E4E8">)[:</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"1"</span><span style="color:#E1E4E8">]) </span><span style="color:#F97583">for</span><span style="color:#E1E4E8"> ip </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> ips]</span></span></code></pre>
<p>The key settings include:</p>
<ul>
<li><code>DEBUG = True</code> - Enables detailed error pages</li>
<li><code>ALLOWED_HOSTS = ["*"]</code> - Accepts requests from any host</li>
<li>Security settings like <code>SECURE_SSL_REDIRECT = False</code> - Prevents forced HTTPS redirection</li>
<li>Django extensions and debug toolbar for development</li>
</ul>
<h2 id="traefik-configuration">Traefik Configuration</h2>
<p>The Traefik configuration (<code>compose/staging/traefik/traefik.yml</code>) manages routing:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">entryPoints</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  web</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">    # http</span></span>
<span class="line"><span style="color:#85E89D">    address</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">":80"</span></span>
<span class="line"><span style="color:#6A737D">    # Removed redirection to allow HTTP access</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">http</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  routers</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">    # HTTP router for direct access</span></span>
<span class="line"><span style="color:#85E89D">    web-router</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      rule</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Host(`localhost`) || Host(`0.0.0.0`)"</span></span>
<span class="line"><span style="color:#85E89D">      entryPoints</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#9ECBFF">web</span></span>
<span class="line"><span style="color:#85E89D">      service</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">django</span></span></code></pre>
<p>Key changes:</p>
<ul>
<li>Removed forced HTTPS redirection from the web entrypoint</li>
<li>Added a direct HTTP router for localhost and 0.0.0.0</li>
</ul>
<h2 id="requirements">Requirements</h2>
<p>The dependencies required for hot reloading are specified in <code>requirements/staging.txt</code>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span># PRECAUTION: avoid production dependencies that aren't in development</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-r production.txt</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Development tools</span></span>
<span class="line"><span>django-extensions==3.2.0</span></span>
<span class="line"><span>uvicorn[standard]==0.26.0</span></span>
<span class="line"><span>django-debug-toolbar</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Hot reloading</span></span>
<span class="line"><span>watchdog==3.0.0</span></span></code></pre>
<p>Key packages:</p>
<ul>
<li><code>uvicorn[standard]</code> - For ASGI support with Gunicorn</li>
<li><code>watchdog</code> - For file system monitoring</li>
<li><code>django-extensions</code> and <code>django-debug-toolbar</code> - For development tools</li>
</ul>
<h2 id="environment-variables">Environment Variables</h2>
<p>The environment variables in <code>.envs/.staging/.django</code> configure Django:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span># General</span></span>
<span class="line"><span>DJANGO_READ_DOT_ENV_FILE=False</span></span>
<span class="line"><span>DJANGO_SETTINGS_MODULE=config.settings.staging</span></span>
<span class="line"><span>DJANGO_SECRET_KEY=secret</span></span>
<span class="line"><span>DJANGO_ADMIN_URL=admin/</span></span>
<span class="line"><span>DJANGO_ALLOWED_HOSTS=localhost,localhost:5000</span></span>
<span class="line"><span>USE_DOCKER=yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Security</span></span>
<span class="line"><span>DJANGO_SECURE_SSL_REDIRECT=False</span></span></code></pre>
<p>Key variables:</p>
<ul>
<li><code>DJANGO_SETTINGS_MODULE=config.settings.staging</code> - Use the staging settings</li>
<li><code>USE_DOCKER=yes</code> - Indicate we’re running in Docker</li>
<li><code>DJANGO_SECURE_SSL_REDIRECT=False</code> - Disable SSL redirect</li>
</ul>
<h2 id="running-the-setup">Running the Setup</h2>
<p>To use this hot reload setup:</p>
<ol>
<li>
<p>Build the images:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">docker-compose</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> staging.yml</span><span style="color:#9ECBFF"> build</span></span></code></pre>
</li>
<li>
<p>Start the containers:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">docker-compose</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> staging.yml</span><span style="color:#9ECBFF"> up</span></span></code></pre>
</li>
<li>
<p>Access the application:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">curl</span><span style="color:#9ECBFF"> http://localhost</span></span></code></pre>
</li>
<li>
<p>Monitor logs for hot reload activity:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">docker-compose</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> staging.yml</span><span style="color:#9ECBFF"> logs</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> django</span></span></code></pre>
</li>
</ol>
<p>When you modify the code, you should see output in the logs indicating that workers are reloading:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>[INFO] Worker reloading: /app/path/to/changed/file.py modified</span></span></code></pre>
<h2 id="handling-database-changes">Handling Database Changes</h2>
<p>For database schema changes (e.g., adding models or fields):</p>
<ol>
<li>Make the code changes - they will be automatically detected</li>
<li>Create migrations:
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">docker-compose</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> staging.yml</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> django</span><span style="color:#9ECBFF"> python</span><span style="color:#9ECBFF"> manage.py</span><span style="color:#9ECBFF"> makemigrations</span></span></code></pre>
</li>
<li>Apply migrations:
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">docker-compose</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> staging.yml</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> django</span><span style="color:#9ECBFF"> python</span><span style="color:#9ECBFF"> manage.py</span><span style="color:#9ECBFF"> migrate</span></span></code></pre>
</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues-and-solutions">Common Issues and Solutions</h3>
<ol>
<li>
<p><strong>403 Forbidden Errors</strong></p>
<ul>
<li>Ensure <code>ALLOWED_HOSTS</code> includes your hostname</li>
<li>Check <code>CSRF_TRUSTED_ORIGINS</code> includes your access URL</li>
<li>Verify Traefik is not forcing HTTPS redirects</li>
</ul>
</li>
<li>
<p><strong>Hot reload not working</strong></p>
<ul>
<li>Check logs for file change detection</li>
<li>Ensure volume mapping is correct in docker-compose</li>
<li>Verify <code>reload = True</code> in Gunicorn config</li>
</ul>
</li>
<li>
<p><strong>Static files not loading</strong></p>
<ul>
<li>Run <code>collectstatic</code> manually</li>
<li>Check <code>STATIC_ROOT</code> and <code>STATIC_URL</code> in settings</li>
</ul>
</li>
<li>
<p><strong>Package missing errors</strong></p>
<ul>
<li>Update requirements/staging.txt and rebuild</li>
</ul>
</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>This hot reload implementation provides a productive development environment for Django in a staging-like Docker setup. It combines the benefits of containerization with the convenience of automatic code reloading, enabling developers to iterate quickly without manual restarts.</p>
<p>By correctly configuring Docker volumes, Gunicorn, Django settings, and Traefik, changes to the codebase are immediately reflected in the running application, with special handling for database schema changes through Django’s migration system.</p>
<p>That’s it! You have successfully implemented hot reloading for Django in a Docker staging environment. I hope you found this post helpful. If you have any questions or feedback, feel free to dm me on <a href="https://x.com/Mangesh_Bide">X</a> or mail me at <a href="mailto:mangeshsbide@gmail.com">gmail</a>.</p> </div> <div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700"> <a href="/blog" class="inline-flex items-center text-blue-600 dark:text-blue-400 hover:underline">
← Back to blog
</a> </div> </article>  </main> <footer class="border-t border-gray-200 dark:border-gray-700 mt-16"> <div class="max-w-4xl mx-auto px-4 py-8 text-center text-gray-600 dark:text-gray-400"> <p>Made with 💙 by <a href="https://github.com/1mangesh1" class="text-blue-600 dark:text-blue-400 hover:underline">Mangesh</a></p> </div> </footer> </div> <script type="module">const o=document.getElementById("theme-toggle"),d=document.documentElement,l=localStorage.getItem("theme")||"light";l==="dark"&&d.classList.add("dark");o?.addEventListener("click",()=>{d.classList.toggle("dark");const t=d.classList.contains("dark");localStorage.setItem("theme",t?"dark":"light")});const c=document.getElementById("mobile-menu-btn"),e=document.getElementById("mobile-menu"),n=document.getElementById("menu-open-icon"),s=document.getElementById("menu-close-icon");c?.addEventListener("click",()=>{e?.classList.contains("hidden")?(e?.classList.remove("hidden"),n?.classList.add("hidden"),s?.classList.remove("hidden")):(e?.classList.add("hidden"),n?.classList.remove("hidden"),s?.classList.add("hidden"))});const a=e?.querySelectorAll("a");a?.forEach(t=>{t.addEventListener("click",()=>{e?.classList.add("hidden"),n?.classList.remove("hidden"),s?.classList.add("hidden")})});document.addEventListener("click",t=>{const i=t.target;!e?.contains(i)&&!c?.contains(i)&&(e?.classList.add("hidden"),n?.classList.remove("hidden"),s?.classList.add("hidden"))});</script> </body> </html>