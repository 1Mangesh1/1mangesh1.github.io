---
// NASA Astronomy Picture of the Day component
---

<div class="nasa-apod-container">
  <div class="bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-6 border border-indigo-200 dark:border-indigo-800">
    <h3 class="font-semibold text-lg mb-4 text-indigo-900 dark:text-indigo-100 flex items-center">
      <span class="mr-2">ðŸŒŒ</span>
      Astronomy Picture of the Day
    </h3>
    
    <div id="apod-content" class="space-y-4">
      <div class="animate-pulse">
        <div class="h-48 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"></div>
        <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"></div>
        <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"></div>
      </div>
    </div>
  </div>
</div>

<script>
  const API_KEY = "ZHQlfyfHdYSYnzRjUaRhWHMgRRtWo66ourOBYChp";
  
  async function fetchAPOD() {
    try {
      const response = await fetch(`https://api.nasa.gov/planetary/apod?api_key=${API_KEY}`);
      const data = await response.json();
      
      const container = document.getElementById('apod-content');
      if (!container) return;
      
      container.innerHTML = `
        <div class="space-y-4">
          <div class="relative group">
            <img 
              src="${data.url}" 
              alt="${data.title}"
              class="w-full h-48 object-cover rounded-lg shadow-lg group-hover:shadow-xl transition-shadow duration-300"
              loading="lazy"
            />
            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 rounded-lg"></div>
          </div>
          
          <div>
            <h4 class="font-semibold text-lg mb-2 text-gray-900 dark:text-gray-100">${data.title}</h4>
            <p class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed">${data.explanation}</p>
            <div class="mt-3 flex items-center justify-between text-xs text-gray-500 dark:text-gray-500">
              <span>ðŸ“… ${new Date(data.date).toLocaleDateString()}</span>
              <span>ðŸ“¸ ${data.copyright || 'NASA'}</span>
            </div>
          </div>
        </div>
      `;
    } catch (error) {
      console.error('Error fetching APOD:', error);
      const container = document.getElementById('apod-content');
      if (!container) return;
      
      container.innerHTML = `
        <div class="text-center py-8">
          <div class="text-4xl mb-2">ðŸš€</div>
          <p class="text-gray-600 dark:text-gray-400">Unable to load today's space image. Try again later!</p>
        </div>
      `;
    }
  }
  
  // Fetch APOD when component loads
  fetchAPOD();
</script>
