---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Terminal - Mangesh Bide" description="Explore my portfolio through a terminal interface">
  <div class="min-h-screen bg-gray-900 p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
      <!-- Terminal Window -->
      <div class="bg-gray-800 rounded-lg shadow-2xl overflow-hidden border border-gray-700">
        <!-- Title Bar -->
        <div class="bg-gray-700 px-4 py-2 flex items-center gap-2">
          <div class="flex gap-2">
            <div class="w-3 h-3 rounded-full bg-red-500"></div>
            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
            <div class="w-3 h-3 rounded-full bg-green-500"></div>
          </div>
          <span class="text-gray-400 text-sm ml-4 font-mono">mangesh@portfolio ~ </span>
        </div>

        <!-- Terminal Content -->
        <div id="terminal" class="p-4 h-[70vh] overflow-y-auto font-mono text-sm">
          <div id="output" class="text-green-400 space-y-1"></div>
          <div class="flex items-center mt-2">
            <span class="text-green-400 mr-2">visitor@mangesh.dev:~$</span>
            <input
              type="text"
              id="input"
              class="flex-1 bg-transparent text-green-400 outline-none caret-green-400"
              autocomplete="off"
              autofocus
            />
          </div>
        </div>
      </div>

      <!-- Help hint -->
      <p class="text-center text-gray-500 mt-4 text-sm">
        Type <code class="bg-gray-800 px-2 py-1 rounded text-green-400">help</code> to get started
      </p>
    </div>
  </div>
</Layout>

<script>
  const output = document.getElementById('output')!;
  const input = document.getElementById('input') as HTMLInputElement;
  const terminal = document.getElementById('terminal')!;

  const commandHistory: string[] = [];
  let historyIndex = -1;

  const asciiArt = `
  __  __                             _
 |  \\/  | __ _ _ __   __ _  ___  ___| |__
 | |\\/| |/ _\` | '_ \\ / _\` |/ _ \\/ __| '_ \\
 | |  | | (_| | | | | (_| |  __/\\__ \\ | | |
 |_|  |_|\\__,_|_| |_|\\__, |\\___||___/_| |_|
                     |___/
  `;

  const commands: Record<string, () => string | string[]> = {
    help: () => [
      'Available commands:',
      '',
      '  about      - Learn about me',
      '  skills     - View my technical skills',
      '  projects   - List my projects',
      '  blog       - Recent blog posts',
      '  contact    - Get my contact info',
      '  social     - Social media links',
      '  resume     - Download my resume',
      '  games      - Play some games',
      '  tools      - Developer tools',
      '  whoami     - Who are you?',
      '  date       - Current date/time',
      '  clear      - Clear terminal',
      '  exit       - Leave terminal',
      '',
      'Tip: Use â†‘/â†“ arrows for command history'
    ],

    about: () => [
      asciiArt,
      '',
      "Hi! I'm Mangesh Bide, a software developer passionate about",
      'building innovative solutions with Python, Django, TensorFlow,',
      'and modern web technologies.',
      '',
      'I enjoy working on machine learning projects, building web',
      'applications, and sharing knowledge through blogging.',
      '',
      'Type "skills" to see my tech stack.'
    ],

    skills: () => [
      'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”',
      'â”‚           TECHNICAL SKILLS              â”‚',
      'â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤',
      'â”‚ Languages:  Python, JavaScript, TS      â”‚',
      'â”‚ Backend:    Django, Node.js, NestJS     â”‚',
      'â”‚ Frontend:   React, Astro, Tailwind      â”‚',
      'â”‚ ML/AI:      TensorFlow, PyTorch         â”‚',
      'â”‚ DevOps:     Docker, AWS, Terraform      â”‚',
      'â”‚ Database:   PostgreSQL, MongoDB, Redis  â”‚',
      'â”‚ Tools:      Git, VS Code, Cursor        â”‚',
      'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜'
    ],

    projects: () => [
      'Featured Projects:',
      '',
      'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”',
      'â”‚ 1. Personal Portfolio Website                â”‚',
      'â”‚    Astro + Tailwind + TypeScript             â”‚',
      'â”‚    â†’ mangeshbide.tech                        â”‚',
      'â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤',
      'â”‚ 2. Interactive Games Collection              â”‚',
      'â”‚    Vanilla JS + Canvas API                   â”‚',
      'â”‚    â†’ /games                                  â”‚',
      'â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤',
      'â”‚ 3. Developer Tools Suite                     â”‚',
      'â”‚    QR, JSON, Base64, Password tools          â”‚',
      'â”‚    â†’ /tools                                  â”‚',
      'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜',
      '',
      'Visit /portfolio for the full list.'
    ],

    blog: () => [
      'Recent Blog Posts:',
      '',
      '  â†’ Visit /blog for all articles',
      '',
      'Topics I write about:',
      '  â€¢ Web Development',
      '  â€¢ Machine Learning',
      '  â€¢ Developer Tools',
      '  â€¢ Career Tips',
      '',
      'Type "open blog" to visit the blog page.'
    ],

    contact: () => [
      'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”',
      'â”‚            CONTACT INFO                 â”‚',
      'â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤',
      'â”‚ Email:    hello@mangeshbide.tech        â”‚',
      'â”‚ Website:  mangeshbide.tech              â”‚',
      'â”‚ Location: India                         â”‚',
      'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜',
      '',
      'Type "open contact" to send a message.'
    ],

    social: () => [
      'Social Links:',
      '',
      '  GitHub:   github.com/1mangesh1',
      '  Twitter:  twitter.com/Mangesh_Bide',
      '  LinkedIn: linkedin.com/in/mangesh-bide',
      '',
      'Type "open github" to visit my GitHub.'
    ],

    resume: () => [
      'Opening resume download...',
      '',
      'Or visit: /Resume.pdf'
    ],

    games: () => [
      'Available Games:',
      '',
      '  â€¢ Hangman      - Programming word guessing',
      '  â€¢ Pixel Art    - Create pixel masterpieces',
      '  â€¢ Whack-a-Bug  - Squash those bugs!',
      '  â€¢ Typing Test  - Test your speed',
      '  â€¢ Dev Bingo    - Developer bingo card',
      '',
      'Type "open games" to play.'
    ],

    tools: () => [
      'Developer Tools:',
      '',
      '  â€¢ QR Code Generator',
      '  â€¢ JSON Formatter',
      '  â€¢ Base64 Encoder/Decoder',
      '  â€¢ Password Generator',
      '  â€¢ Regex Tester',
      '  â€¢ Diff Checker',
      '  â€¢ And more...',
      '',
      'Type "open tools" to use them.'
    ],

    whoami: () => ['visitor - a curious explorer of the internet'],

    date: () => [new Date().toString()],

    clear: () => {
      output.innerHTML = '';
      return [];
    },

    exit: () => {
      window.location.href = '/';
      return ['Goodbye! Redirecting to homepage...'];
    },

    sudo: () => ['Nice try! But you need root access for that. ðŸ˜'],

    ls: () => [
      'about.txt  blog/  contact.txt  games/  portfolio/',
      'projects/  resume.pdf  skills.txt  tools/'
    ],

    pwd: () => ['/home/visitor/mangesh-portfolio'],

    cat: () => ['Usage: cat <filename> - Try "cat about.txt"'],

    'cat about.txt': () => commands.about(),
    'cat skills.txt': () => commands.skills(),
    'cat contact.txt': () => commands.contact(),

    cd: () => ['Hint: Try "open <page>" to navigate (e.g., "open blog")'],

    echo: () => ['Echo! Echo! Echo...'],

    neofetch: () => [
      '       _,met$$$$$gg.           visitor@mangesh.dev',
      '    ,g$$$$$$$$$$$$$$$P.        -------------------',
      '  ,g$$P"     """Y$$.".         OS: Web Browser',
      ' ,$$P\'              `$$$.      Host: mangeshbide.tech',
      '\',$$P       ,ggs.     `$$b:    Kernel: Astro 5.x',
      '`d$$\'     ,$P"\'   .    $$$     Uptime: Since 2024',
      ' $$P      d$\'     ,    $$P     Packages: Many npm',
      ' $$:      $$.   -    ,d$$\'     Shell: terminal.astro',
      ' $$;      Y$b._   _,d$P\'       Theme: Dark Mode',
      ' Y$$.    `.`"Y$$$$P"\'          Terminal: Custom',
      ' `$$b      "-.__               CPU: Your Device',
      '  `Y$$                         Memory: Efficient',
      '   `Y$$.                       ',
      '     `$$b.                     ',
      '       `Y$$b.                  ',
      '          `"Y$b._             ',
      '              `"""            '
    ],

    matrix: () => {
      document.body.classList.add('matrix-mode');
      setTimeout(() => document.body.classList.remove('matrix-mode'), 5000);
      return ['Entering the Matrix... (5 seconds)'];
    },

    coffee: () => [
      '        ( (',
      '         ) )',
      '      ........',
      '      |      |]',
      '      \\      /',
      '       `----\'',
      '',
      'Here\'s your coffee! â˜•'
    ],

    joke: () => {
      const jokes = [
        'Why do programmers prefer dark mode? Because light attracts bugs!',
        'A SQL query walks into a bar, walks up to two tables and asks... "Can I join you?"',
        'Why do Java developers wear glasses? Because they can\'t C#!',
        'There are only 10 types of people: those who understand binary and those who don\'t.',
        '!false - It\'s funny because it\'s true.',
        'A programmer\'s wife tells him: "Go to the store and buy a loaf of bread. If they have eggs, buy a dozen." He comes home with 12 loaves of bread.'
      ];
      return [jokes[Math.floor(Math.random() * jokes.length)]];
    }
  };

  // Handle open command
  const openPages: Record<string, string> = {
    blog: '/blog',
    portfolio: '/portfolio',
    about: '/about',
    contact: '/contact',
    games: '/games',
    tools: '/tools',
    github: 'https://github.com/1mangesh1',
    twitter: 'https://twitter.com/Mangesh_Bide',
    linkedin: 'https://linkedin.com/in/mangesh-bide',
    resume: '/Resume.pdf'
  };

  function processCommand(cmd: string): string[] {
    const trimmed = cmd.trim().toLowerCase();

    if (trimmed === '') return [];

    // Check for open command
    if (trimmed.startsWith('open ')) {
      const page = trimmed.slice(5);
      if (openPages[page]) {
        setTimeout(() => window.open(openPages[page], '_blank'), 500);
        return [`Opening ${page}...`];
      }
      return [`Unknown page: ${page}. Try: ${Object.keys(openPages).join(', ')}`];
    }

    // Check for direct command
    if (commands[trimmed]) {
      const result = commands[trimmed]();
      return Array.isArray(result) ? result : [result];
    }

    // Unknown command
    return [`Command not found: ${cmd}. Type "help" for available commands.`];
  }

  function addOutput(lines: string[], isCommand = false) {
    lines.forEach(line => {
      const div = document.createElement('div');
      div.textContent = line;
      if (isCommand) {
        div.className = 'text-white';
      }
      output.appendChild(div);
    });
    terminal.scrollTop = terminal.scrollHeight;
  }

  // Initial message
  addOutput([
    'Welcome to Mangesh\'s Terminal Portfolio!',
    'Type "help" to see available commands.',
    ''
  ]);

  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      const cmd = input.value;

      if (cmd.trim()) {
        commandHistory.unshift(cmd);
        historyIndex = -1;
      }

      // Show the command
      addOutput([`visitor@mangesh.dev:~$ ${cmd}`], true);

      // Process and show result
      const result = processCommand(cmd);
      if (result.length > 0) {
        addOutput(result);
        addOutput(['']);
      }

      input.value = '';
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      if (historyIndex < commandHistory.length - 1) {
        historyIndex++;
        input.value = commandHistory[historyIndex];
      }
    } else if (e.key === 'ArrowDown') {
      e.preventDefault();
      if (historyIndex > 0) {
        historyIndex--;
        input.value = commandHistory[historyIndex];
      } else {
        historyIndex = -1;
        input.value = '';
      }
    }
  });

  // Focus input when clicking terminal
  terminal.addEventListener('click', () => input.focus());
</script>

<style>
  #terminal {
    scrollbar-width: thin;
    scrollbar-color: #4ade80 #1f2937;
  }

  #terminal::-webkit-scrollbar {
    width: 8px;
  }

  #terminal::-webkit-scrollbar-track {
    background: #1f2937;
  }

  #terminal::-webkit-scrollbar-thumb {
    background: #4ade80;
    border-radius: 4px;
  }

  .matrix-mode {
    animation: matrix 0.1s infinite;
  }

  @keyframes matrix {
    0%, 100% { filter: hue-rotate(0deg); }
    50% { filter: hue-rotate(90deg) brightness(1.2); }
  }

  #output div {
    white-space: pre;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  }
</style>
